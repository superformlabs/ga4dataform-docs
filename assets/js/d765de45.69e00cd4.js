"use strict";(self.webpackChunkga_4_dataform=self.webpackChunkga_4_dataform||[]).push([[7603],{370:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var n=t(4848),i=t(8453);const r={title:"Strict Act-as Mode",description:"Explaining Strict Act-as Mode",slug:"/strict-act-as-mode"},c=void 0,a={id:"dataform-academy/strict-act-as-mode",title:"Strict Act-as Mode",description:"Explaining Strict Act-as Mode",source:"@site/docs/dataform-academy/strict-act-as-mode.md",sourceDirName:"dataform-academy",slug:"/strict-act-as-mode",permalink:"/docs/strict-act-as-mode",draft:!1,unlisted:!1,editUrl:"https://github.com/<your-org>/<your-repo>/edit/main/docs/docs/dataform-academy/strict-act-as-mode.md",tags:[],version:"current",frontMatter:{title:"Strict Act-as Mode",description:"Explaining Strict Act-as Mode",slug:"/strict-act-as-mode"},sidebar:"tutorialSidebar",previous:{title:"Compilation in Dataform",permalink:"/docs/release-configurations-compilations"}},o={},d=[];function l(e){const s={br:"br",em:"em",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:["When Strict Act-As Mode is enabled, workflows are not executed directly by the Dataform default service account. Instead, Dataform default service account ",(0,n.jsx)(s.em,{children:"acts as"})," a custom service account that holds a specific and limited set of permissions. This pattern, known as service account impersonation, is a standard security practice in cloud identity and access management. While widely used, it can be confusing if you are not familiar with it. The Dataform default service account is responsible for orchestration within Dataform, while the custom service account is responsible for execution against BigQuery."]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"Strict Act-As Mode overview",src:t(4357).A+"",width:"960",height:"540"})}),"\n",(0,n.jsx)(s.p,{children:"Service account impersonation allows the permissions required to perform a task to be separated from the identity that initiates the task. This separation helps enforce several basics security and access management principles:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Principle of Least Privilege (PoLP)"}),(0,n.jsx)(s.br,{}),"\n","A service account should only have the minimum permissions required to perform its specific function. Granting excessive permissions increases the blast radius if that account is compromised."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Isolation and Scoping"}),(0,n.jsx)(s.br,{}),"\n","Service accounts should be scoped to a single responsibility or system boundary, rather than shared across multiple services or workloads."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Auditability and Accountability"}),(0,n.jsx)(s.br,{}),"\n","Every action performed in the system should be traceable to the service that initiated it. With impersonation, orchestration actions are clearly attributed to the control plane, while data access actions are attributed to the execution account."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Credential Management"}),(0,n.jsx)(s.br,{}),"\n","Service account impersonation relies on short-lived access tokens, issued only when needed and automatically rotated. This eliminates the need for long-lived static keys and significantly reduces credential leakage risk."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Strict Act-As Mode in Dataform encourage to applies these principles as follows:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Principle of Least Privilege"}),(0,n.jsx)(s.br,{}),"\n","The Dataform service agent only holds permissions required for orchestration tasks such as managing workflows, reading repository metadata, scheduling executions, and requesting impersonation. It does not have direct access to BigQuery data."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Isolation and Scoping"}),(0,n.jsx)(s.br,{}),"\n","The default service account is dedicated to Dataform orchestration, while the custom service account is scoped exclusively to BigQuery access. If the default service account is compromised, no access to BigQuery is possible. If the custom service account is compromised, no Dataform orchestration or execution can be triggered."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Auditability and Accountability"}),(0,n.jsx)(s.br,{}),"\n","Because execution occurs via impersonation, it is always clear which service orchestrated the run and which service account accessed the data."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Credential Management"}),(0,n.jsx)(s.br,{}),"\n","The execution service account uses short-lived credentials that are never stored or long-lived, and BigQuery access exists only for the duration of the workflow execution."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"In practice, this results in the following role distribution:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Custom Service Account - Execution"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"BigQuery Data Editor"}),(0,n.jsx)(s.br,{}),"\n","Allows creating, updating, and deleting tables and views in BigQuery datasets.",(0,n.jsx)(s.br,{}),"\n","Used to materialize tables, overwrite partitions, and manage transformation outputs."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"BigQuery Data Viewer"}),(0,n.jsx)(s.br,{}),"\n","Grants read-only access to tables and views.",(0,n.jsx)(s.br,{}),"\n","Required to read source data during query execution."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"BigQuery Job User"}),(0,n.jsx)(s.br,{}),"\n","Permits running BigQuery jobs (queries, loads, extracts).",(0,n.jsx)(s.br,{}),"\n","Without this role, the account could not execute SQL even if it had dataset access."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Default Service Account - Orchestration"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Dataform Service Agent"}),(0,n.jsx)(s.br,{}),"\n","Allows Dataform to manage repositories, schedules, compilations, and workflow executions.",(0,n.jsx)(s.br,{}),"\n","This is required for Dataform itself to function."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Secret Manager Secret Accessor"}),(0,n.jsx)(s.br,{}),"\n","Enables reading secrets (e.g., credentials, tokens) needed at runtime.",(0,n.jsx)(s.br,{}),"\n","The account can access secrets but cannot modify or create them."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Service Account Token Creator"}),(0,n.jsx)(s.br,{}),"\n","Allows generating short-lived access tokens to impersonate the execution service account.",(0,n.jsx)(s.br,{}),"\n","This is the key permission that enables secure service account impersonation."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Service Account User"}),(0,n.jsx)(s.br,{}),"\n","Permits attaching or acting as a service account where explicitly allowed.",(0,n.jsx)(s.br,{}),"\n","Often required by Google-managed services to complete impersonation flows."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"screenshot",src:t(5809).A+"",width:"1526",height:"306"})}),"\n",(0,n.jsx)(s.p,{children:"This is the default configuration set by GA4Dataform installer."})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},5809:(e,s,t)=>{t.d(s,{A:()=>n});const n=t.p+"assets/images/strict-act-as-mode-iam-191d35b1da81cf0a20ac438ed1bc3faa.png"},4357:(e,s,t)=>{t.d(s,{A:()=>n});const n=t.p+"assets/images/strict-act-as-mode-3f8f74bea6561a27e65d6e6918761c8c.png"},8453:(e,s,t)=>{t.d(s,{R:()=>c,x:()=>a});var n=t(6540);const i={},r=n.createContext(i);function c(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);