"use strict";(self.webpackChunkga_4_dataform=self.webpackChunkga_4_dataform||[]).push([[1927],{5840:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var i=s(4848),t=s(8453);const l={title:"Items tables",description:"Learn how to configure items tables and build funnel items report",slug:"/items-tables"},r=void 0,o={id:"references/items-tables",title:"Items tables",description:"Learn how to configure items tables and build funnel items report",source:"@site/docs/references/items-tables.md",sourceDirName:"references",slug:"/items-tables",permalink:"/docs/items-tables",draft:!1,unlisted:!1,editUrl:"https://github.com/<your-org>/<your-repo>/edit/main/docs/docs/references/items-tables.md",tags:[],version:"current",frontMatter:{title:"Items tables",description:"Learn how to configure items tables and build funnel items report",slug:"/items-tables"},sidebar:"tutorialSidebar",previous:{title:"User Stitching",permalink:"/docs/user-stitching"},next:{title:"Other References",permalink:"/docs/references-others"}},d={},c=[{value:"Configuration",id:"configuration",level:2},{value:"How to enable",id:"how-to-enable",level:3},{value:"Configuring the options",id:"configuring-the-options",level:3},{value:"Output tables",id:"output-tables",level:2},{value:"ga4_items_sessions",id:"ga4_items_sessions",level:3},{value:"report_items_funnel",id:"report_items_funnel",level:3},{value:"Sample reporting table",id:"sample-reporting-table",level:2}];function a(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.admonition,{title:"Edge case",type:"premium",children:(0,i.jsx)(n.p,{children:"This feature is exclusive for Premium users"})}),"\n",(0,i.jsxs)(n.p,{children:["For ecommerce properties, there is is now a module that can be enabled named ",(0,i.jsx)(n.code,{children:"items_funnel_report"})]}),"\n",(0,i.jsx)(n.p,{children:"When enabled, this module outputs 2 tables"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ga4_items_sessions"}),"\nthis is a raw-ish table consisting of 1 row per item per sessions, with aggregate metrics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"report_items_funnel"}),"\nthis is a condensed version of the items_sessions table, aggregated by day, optionally including drilldowns on the session level. It can be used as a reporting table in Looker Studio (or BI tool of choice)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["The config file can be found at ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"includes/custom/modules/items_funnel_report/config.json"})})]}),"\n",(0,i.jsx)(n.p,{children:"The format should be valid JSON. The default is found below:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "version": 1,\n    "enabled": false,\n    \n    "drilldowns": {\n        "channel_group": true,\n        "device_category": false,\n        "is_new_session": false\n    },\n\n    "itemDrilldowns": {\n        "item_id": true,\n        "item_name": true,\n        "item_brand": true,\n        "item_variant": true,\n        "item_category": true,\n        "item_category2": true,\n        "item_category3": true,\n        "item_category4": true,\n        "item_category5": true,\n        "affiliation": true\n    },\n    \n    "itemParamsCustom": [],\n    "sessionDimensions": []\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"how-to-enable",children:"How to enable"}),"\n",(0,i.jsxs)(n.p,{children:["When the key ",(0,i.jsx)(n.code,{children:"enabled"})," is set to ",(0,i.jsx)(n.code,{children:"true"}),", the output tables will build (using incremental logic)"]}),"\n",(0,i.jsxs)(n.p,{children:["After setting this value to true and tweaking other config options, you should ",(0,i.jsx)(n.code,{children:"commit"})," \u2192 ",(0,i.jsx)(n.code,{children:"push"})," \u2192 and the next compiled workflow will build the items table (using the ",(0,i.jsx)(n.code,{children:"GA4_START_DATE"})," as starting date)."]}),"\n",(0,i.jsx)(n.h3,{id:"configuring-the-options",children:"Configuring the options"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"version"})," - this describes the version number of the config file. The latest version is ",(0,i.jsx)(n.code,{children:"1"})," - so use that."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"drilldowns"})," is an object with several pre-defined \u201ctoggles\u201d of custom dimensions that can be enabled or disabled."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["channel_group - this will add the ",(0,i.jsx)(n.code,{children:"last_non_direct_traffic_source.default_channel_grouping"})," column to the reporting table"]}),"\n",(0,i.jsxs)(n.li,{children:["device_category - this will add a column ",(0,i.jsx)(n.code,{children:"device_category"})," to the output table (desktop, mobile, tablet, smart tv)"]}),"\n",(0,i.jsxs)(n.li,{children:["is_new_session - this will use ",(0,i.jsx)(n.code,{children:"ga_session_number = 1"})," logic to the reporting table, so you can drill down/segment on new users"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"itemsDrilldowns"})," is an object where you can toggle the standard item dimensions on or off."]}),"\n",(0,i.jsx)(n.p,{children:"Supported toggles:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"item_id"}),"\n",(0,i.jsx)(n.li,{children:"item_name"}),"\n",(0,i.jsx)(n.li,{children:"item_brand"}),"\n",(0,i.jsx)(n.li,{children:"item_variant"}),"\n",(0,i.jsx)(n.li,{children:"item_category"}),"\n",(0,i.jsx)(n.li,{children:"item_category2"}),"\n",(0,i.jsx)(n.li,{children:"item_category3"}),"\n",(0,i.jsx)(n.li,{children:"item_category4"}),"\n",(0,i.jsx)(n.li,{children:"item_category5"}),"\n",(0,i.jsx)(n.li,{children:"affiliation"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"We recommend disabling item dimensions that are not filled consistently,or else they will \u201cbreak\u201d the funnel when drilling down."}),"\n",(0,i.jsxs)(n.p,{children:["This is often the case when ",(0,i.jsx)(n.code,{children:"view_item_list"})," has no ",(0,i.jsx)(n.code,{children:"item_variant"})," , but ",(0,i.jsx)(n.code,{children:"add_to_cart"})," has."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"itemParamsCustom"})," is an array of strings with names of the custom item parameter definitions you have configured."]}),"\n",(0,i.jsx)(n.p,{children:"Example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'"itemParamsCustom": [ "size", "colour" ],\n'})}),"\n",(0,i.jsxs)(n.p,{children:["This works if your ",(0,i.jsx)(n.code,{children:"includes/custom/config.js"})," has item params with these ",(0,i.jsx)(n.strong,{children:"output names"})," configured."]}),"\n",(0,i.jsx)(n.p,{children:"Note: use the output names (used in renameTo)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:'  CUSTOM_ITEM_PARAMS_ARRAY: [\n      { name: "size", type: "string" },\n      { name: "color", type: "string", renameTo: "colour" }\n   ]\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"sessionDimensions"})," is an array of OBJECTS that contain optional other session dimension drilldowns."]}),"\n",(0,i.jsx)(n.p,{children:"The column name objects have the following keys"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"})," - valid column names as they appear in the ",(0,i.jsx)(n.code,{children:"ga4_sessions"})," table"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"renameTo"})," - optional - the name they will get in the items output table. If this is not used, a sanitised verion of ",(0,i.jsx)(n.code,{children:"name"})," will be used"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'"sessionDimensions": [ \n  { "name": "last_non_direct_traffic_source.campaign", "renameTo": "campaign_name" },\n  { "name": "session_params_custom.customer_type", "renameTo": "customer_type" }\n]\n'})}),"\n",(0,i.jsx)(n.h2,{id:"output-tables",children:"Output tables"}),"\n",(0,i.jsx)(n.h3,{id:"ga4_items_sessions",children:"ga4_items_sessions"}),"\n",(0,i.jsx)(n.p,{children:"This table is a minimal table, containing"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"session_date"})," (partitioning column)"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"property_id"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"platform"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"is_final"})," (used for incremental building)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"item"})," (a singe item, flattened containing all dimensions and custom params)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"item_totals"})," (a struct containing event counts for every ecommerce event)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"add_payment_info"}),"\n",(0,i.jsx)(n.li,{children:"add_shipping_info"}),"\n",(0,i.jsx)(n.li,{children:".. etc (for every ecommerce event)"}),"\n",(0,i.jsx)(n.li,{children:"purchase_quantity"}),"\n",(0,i.jsx)(n.li,{children:"item_revenue"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"report_items_funnel",children:"report_items_funnel"}),"\n",(0,i.jsxs)(n.p,{children:["This table is smaller (row-wise) and a bit wider. It contains daily aggregates based on ",(0,i.jsx)(n.code,{children:"session_date"})," and your choice of dimensions you add:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"session_date"})," (partitioning column)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"item"})," - a singe item, flattened containing the chosen drilldowns and optional custom params"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"property_id"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"platform"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"is_final"})," (used for incremental building)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"item_totals"})," - a struct with 3 types of metric aggegates","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"events"})," (based on event counts)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"add_payment_info"}),"\n",(0,i.jsx)(n.li,{children:"add_shipping_info"}),"\n",(0,i.jsx)(n.li,{children:".. etc (for every ecommerce event)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sessions"})," (based on session counts)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"add_payment_info"}),"\n",(0,i.jsx)(n.li,{children:"add_shipping_info"}),"\n",(0,i.jsx)(n.li,{children:".. etc (for every ecommerce event)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"users"})," (based on user_pseudo_id)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"add_payment_info"}),"\n",(0,i.jsx)(n.li,{children:"add_shipping_info"}),"\n",(0,i.jsx)(n.li,{children:".. etc (for every ecommerce event)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"purchase_quantity"})," (sum)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"item_revenue"})," (sum)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"your chosen session dimensions"})," - depending onthe chosen drilldowns and custom dims"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"sample-reporting-table",children:"Sample reporting table"}),"\n",(0,i.jsxs)(n.p,{children:["When connecting the ",(0,i.jsx)(n.code,{children:"report_items_funnel"})," table, it\u2019s pretty simple to connect it to a BI tool and create a table and calculate metrics"]}),"\n",(0,i.jsx)(n.p,{children:"Sample metrics, assuming there is an item_name in the row:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sum(item_totals.events.add_to_cart)"})," = total times the item has been added to cart"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sum(item_totals.sessions.purchase)"})," = total sessions where this item has been purchased"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sum(item_totals.users.purchase) / sum(item_totals.users.view_item)"})," = user based purchase-to-detail rate"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"screenshot",src:s(3450).A+"",width:"1212",height:"346"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},3450:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/items_tables_report-73a8450c5c37fedf39967954b4c3ff6e.png"},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var i=s(6540);const t={},l=i.createContext(t);function r(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);